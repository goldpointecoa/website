<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Gold Pointe Condo Owner's Association</title>
    <link rel="stylesheet" href="css/styles.css">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- CryptoJS library for encryption -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        .admin-container {
            max-width: 1000px;
            margin: 50px auto;
            padding: 30px;
            background-color: #fff;
            border-radius: 5px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        
        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .status-message {
            margin-top: 20px;
            padding: 15px;
            border-radius: 4px;
            display: none;
        }
        
        .success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        .resource-editor {
            width: 100%;
            min-height: 400px;
            font-family: monospace;
            padding: 10px;
            margin-top: 20px;
            border: 1px solid #ddd;
        }
        
        .tab-navigation {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }
        
        .tab-button {
            padding: 10px 20px;
            background-color: #f5f5f5;
            border: none;
            border-radius: 5px 5px 0 0;
            cursor: pointer;
            margin-right: 5px;
        }
        
        .tab-button.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .step {
            margin-bottom: 10px;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <h1>Gold Pointe</h1>
            <p>Condo Owner's Association</p>
        </div>
        <nav>
            <button class="menu-toggle" aria-label="Toggle menu">
                <i class="fas fa-bars"></i>
            </button>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="resources-original.html">Resources (Source)</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li><a href="admin.html" class="active">Admin</a></li>
            </ul>
        </nav>
    </header>

    <main class="container">
        <section class="page-header">
            <h2>Admin Dashboard</h2>
            <p>Manage website content and settings</p>
        </section>

        <div class="admin-container">
            <div class="tab-navigation">
                <button class="tab-button active" data-tab="edit">Edit Resources</button>
                <button class="tab-button" data-tab="test-build">Test Build</button>
                <button class="tab-button" data-tab="help">Help</button>
            </div>
            
            <!-- Edit Tab -->
            <div id="edit" class="tab-content active">
                <h3>Edit Resources Page</h3>
                <p>Make changes to the resources page content. This edits the original unencrypted version.</p>
                
                <button id="loadContentBtn" class="btn">Load Current Content</button>
                
                <textarea id="resourceEditor" class="resource-editor" placeholder="Resources page content will appear here..."></textarea>
                
                <div class="btn-group">
                    <button id="saveContentBtn" class="btn">Save Changes</button>
                </div>
                
                <div id="editStatusMessage" class="status-message"></div>
            </div>
            
            <!-- Test Build Tab -->
            <div id="test-build" class="tab-content">
                <h3>Test Build Process</h3>
                <p>Preview how the build process will encrypt the resources page for production.</p>
                
                <div class="form-group">
                    <label for="password">Password for encryption:</label>
                    <input type="password" id="password" value="goldpointe2025" class="form-control">
                    <small>Default: goldpointe2025</small>
                </div>
                
                <button id="testBuildBtn" class="btn">Run Test Build</button>
                
                <div id="buildStatusMessage" class="status-message"></div>
            </div>
            
            <!-- Help Tab -->
            <div id="help" class="tab-content">
                <h3>Admin Dashboard Help</h3>
                
                <h4>How the New Process Works</h4>
                <p>This website now uses a more streamlined process for handling secure content:</p>
                
                <div class="step">
                    <strong>1. Local Development</strong>
                    <p>During development, you work with <code>resources-original.html</code> directly - which contains all your unencrypted content.</p>
                </div>
                
                <div class="step">
                    <strong>2. Build Process</strong>
                    <p>Our <code>build.sh</code> script automatically:</p>
                    <ul>
                        <li>Creates a <code>public</code> directory for deployment</li>
                        <li>Copies all necessary files into this directory</li>
                        <li>Encrypts <code>resources-original.html</code> and saves it as <code>public/resources.html</code></li>
                        <li>Excludes sensitive files like <code>admin.html</code></li>
                    </ul>
                </div>
                
                <div class="step">
                    <strong>3. Deployment</strong>
                    <p>When you deploy to Netlify:</p>
                    <ul>
                        <li>Only the contents of the <code>public</code> directory are published</li>
                        <li>Sensitive files remain in your Git repository but aren't deployed</li>
                        <li>Visitors can only access the encrypted version of the resources page</li>
                    </ul>
                </div>
                
                <h4>How to Make Updates</h4>
                <ol>
                    <li>Use the "Edit Resources" tab to modify <code>resources-original.html</code></li>
                    <li>Save your changes</li>
                    <li>Commit all changes to Git</li>
                    <li>Deploy to Netlify - the build script will handle everything</li>
                </ol>
                
                <h4>Password Management</h4>
                <p>The password "goldpointe2025" is set in the <code>build.sh</code> script. To change it:</p>
                <ol>
                    <li>Open <code>build.sh</code></li>
                    <li>Find the line <code>const password = 'goldpointe2025';</code></li>
                    <li>Change it to your desired password</li>
                    <li>Save and commit the change</li>
                </ol>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>Gold Pointe COA</h3>
                <p>123 Gold Avenue<br>Anytown, ST 12345</p>
                <p>Phone: (555) 123-4567</p>
                <p>Email: info@goldpointecoa.com</p>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="resources.html">Resources</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2023 Gold Pointe Condo Owner's Association. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Tab functionality
        document.querySelectorAll('.tab-button').forEach(button => {
            button.addEventListener('click', () => {
                // Remove active class from all buttons and content
                document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                
                // Add active class to clicked button and corresponding content
                button.classList.add('active');
                document.getElementById(button.dataset.tab).classList.add('active');
            });
        });
        
        // Show status message
        function showStatus(elementId, message, type) {
            const statusElement = document.getElementById(elementId);
            statusElement.textContent = message;
            statusElement.className = 'status-message ' + type;
            statusElement.style.display = 'block';
        }
        
        // Load content button
        document.getElementById('loadContentBtn').addEventListener('click', async () => {
            try {
                const response = await fetch('resources-original.html');
                if (!response.ok) {
                    throw new Error('Failed to load content: ' + response.status);
                }
                const content = await response.text();
                document.getElementById('resourceEditor').value = content;
                showStatus('editStatusMessage', 'Content loaded successfully.', 'success');
            } catch (error) {
                showStatus('editStatusMessage', error.message, 'error');
            }
        });
        
        // Save content button
        document.getElementById('saveContentBtn').addEventListener('click', () => {
            const content = document.getElementById('resourceEditor').value;
            if (!content) {
                showStatus('editStatusMessage', 'Nothing to save. Please load content first.', 'error');
                return;
            }
            
            // Download the file
            const blob = new Blob([content], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'resources-original.html';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showStatus('editStatusMessage', 'File downloaded. Please replace resources-original.html with this file.', 'success');
        });
        
        // Test build button
        document.getElementById('testBuildBtn').addEventListener('click', async () => {
            try {
                const password = document.getElementById('password').value;
                if (!password) {
                    throw new Error('Please enter a password for encryption');
                }
                
                // Fetch the original content
                const response = await fetch('resources-original.html');
                if (!response.ok) {
                    throw new Error('Failed to load resources-original.html: ' + response.status);
                }
                const content = await response.text();
                
                // Simple encryption test using CryptoJS (similar to what build.sh does)
                const encrypted = CryptoJS.AES.encrypt(content, password).toString();
                
                showStatus('buildStatusMessage', 
                    `Test successful! In production, the build script will:\n
                    1. Create the public directory
                    2. Copy all necessary files
                    3. Encrypt resources-original.html to public/resources.html with password: ${password}
                    4. Deploy only the public directory
                    
                    Your content (${content.length} characters) was successfully encrypted for testing.`, 
                    'success');
            } catch (error) {
                showStatus('buildStatusMessage', 'Build test failed: ' + error.message, 'error');
            }
        });
    </script>
</body>
</html>